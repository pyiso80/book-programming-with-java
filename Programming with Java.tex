%!TEX TS-program = xelatex  
%!TEX encoding = UTF-8 Unicode
\documentclass[twoside, hidelinks]{book}
\hfuzz=10000pt
\hbadness=99999
\usepackage[paperheight=9.25in,
                paperwidth=7.38in,
                left=1.4in,
                right=.75in,
                top=.75in,
                bottom=1.25in,
                footskip=0.6in,
                heightrounded]{geometry}
                
\usepackage[dvipsnames]{xcolor}
\usepackage{varioref}
\usepackage{xspace}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{blindtext}
\usepackage{fontspec}
\usepackage{titlesec} 
\usepackage{titletoc} 
\usepackage{listings}
\usepackage{caption}
\usepackage[unicode=true]{hyperref}


%%%  Replace english with Myanmar, tweaking varioref package 
\def\reftextfaceafter{on the \reftextvario{facing}{next} စာမျက်နှာ}%
\def\reftextfacebefore{on the \reftextvario{facing}{preceding}စာမျက်နှာ}%
\def\reftextafter{on the \reftextvario{following}{next} စာမျက်နှာ}%
\def\reftextbefore{on the \reftextvario{preceding}{previous} စာမျက်နှာ}%
\def\reftextcurrent{on \reftextvario{this}{the current} စာမျက်နှာ}%
\def\reftextfaraway#1{စာမျက်နှာ~\pageref{#1}}%
\def\reftextpagerange#1#2{on စာမျက်နှာ၂၂~\pageref{#1}--\pageref{#2}}%
\def\reftextlabelrange#1#2{\ref{#1} to~\ref{#2}}%


%%% Replace english names with Myanmar
\renewcommand{\contentsname}{မာတိကာ} 
\renewcommand{\chaptername}{}
\renewcommand{\figurename}{ပုံ}


%%% definition of Apple colors
\definecolor{iron}{HTML}{5E5E5E}
\definecolor{steel}{HTML}{797979}
\definecolor{tungsten}{HTML}{424242}
\definecolor{lead}{HTML}{212121}
\definecolor{steelblue}{HTML}{36648B}


%%% Page style related stuff
\fancyhf{}
\fancyhead[LE]{\color{steelblue}\bfseries\mmpdk\nouppercase{\leftmark}}
\fancyhead[RO]{\color{steelblue}\bfseries\mmpdk\nouppercase{\rightmark}}
\fancyfoot[LE,RO]{\thepage}
\pagestyle{fancy}
\setlength{\headsep}{15pt}
\setlength{\headheight}{30pt}% ...at least 51.60004pt
\renewcommand\headrule{
\begin{minipage}
    {1\textwidth}
    \color{MidnightBlue}\hrule width \hsize \kern 1mm 
    \color{MidnightBlue}\hrule width \hsize height 2pt 
\end{minipage}}%


%%% Font related tweaks
\defaultfontfeatures{Script=Myanmar,Mapping=tex-text} 
\fontspec[Script=Myanmar, BoldFont={Padauk Book Bold}, ]{Padauk Book}
\setmainfont[UprightFont={Padauk Book},
                BoldFont={Padauk Book Bold},
                ItalicFont={Padauk Book},
                BoldItalicFont={Padauk Book Bold},
                SmallCapsFont={Padauk Book},
                SlantedFont={Padauk Book}]{Padauk Book}
                [Renderer=Harfbuzz,Script=Myanmar]


%%% Define fonts english font to be used in between Myanmar text               
% Helvetica Neue, Geneva, Tahoma
% Font for normal english words and program code related words to be used in paragraph
%\newfontfamily\myparaen[Color=tungsten, Scale=MatchLowercase]{Verdana}
%\newfontfamily\mycode[Color=lead, Scale=1]{Ubuntu Mono}

%\DeclareTextFontCommand{\myen}{\myparaen}
%\DeclareTextFontCommand{\txtmycode}{\mycode}

\newcommand{\mmem}[1]{\textbf{\color{blue}#1}}

\newcommand{\mmpdk}       {\fontspec[Script=Myanmar,Scale=1]{Myanmar Tagu}\selectfont}

%%% Switching to type writer font and sans serif font in paragraph
% Make sure to set the color to match the main font color
\newcommand{\mycodetmp}   {\fontspec[Scale=1]{Ubuntu Mono}\selectfont}
\newcommand{\myentmp}     {\fontspec[Scale=1,Scale=MatchLowercase]{Verdana}\selectfont}
% Limiting the scope of the selected font
\newcommand{\mycode}   [1]{{\mycodetmp{#1}}}
\newcommand{\myen}   [1]{{\myentmp{#1}}}

%%% With \XeTeXinterwordspaceshaping=2, \color or \textcolor doesn't work 
% This is a workaround to color text 
\newcommand{\myemcodetmp}   {\fontspec[Scale=1, Color=red]{Ubuntu Mono}\selectfont}
\newcommand{\myementmp}     {\fontspec[Scale=1,Scale=MatchLowercase, Color=red]{Verdana}\selectfont}
\newcommand{\myemmmtmp}     {\fontspec[Scale=1,Scale=MatchLowercase, Color=red]{Padauk Book}\selectfont}
% Limiting the scope of the selected font
\newcommand{\myemcode}   [1]{{\myemcodetmp{#1}}}
\newcommand{\myemen}   [1]{{\myementmp{#1}}}
\newcommand{\myemmm}   [1]{{\myemmmtmp{#1}}}

\newcommand{\mydefcodetmp}   {\fontspec[Scale=1, Color=MidnightBlue]{Ubuntu Mono}\selectfont}
\newcommand{\mydefentmp}     {\fontspec[Scale=1,Scale=MatchLowercase, Color=MidnightBlue]{Verdana}\selectfont}
\newcommand{\mydefmmtmp}     {\fontspec[Scale=1,Scale=MatchLowercase, Color=MidnightBlue]{Padauk Book}\selectfont}
% Limiting the scope of the selected font
\newcommand{\mydefcode}   [1]{{\mydefcodetmp{#1}}}
\newcommand{\mydefen}   [1]{{\mydefentmp{#1}}}
\newcommand{\mydefmm}   [1]{{\mydefmmtmp{#1}}}


%%% Switching to type writer font and sans serif font in titles and caption
% Make sure not to set the color. Color should be applied later at the respective
% formatting applied to titles, caption, headers etc.,
\newcommand{\myttlcodetmp}   {\fontspec[Scale=1]{Ubuntu Mono}\selectfont}
\newcommand{\myttlentmp}   {\fontspec[Scale=1,Scale=MatchLowercase]{Verdana}\selectfont}
% Limiting the scope of the selected font
\newcommand{\myttlcode}   [1]{{\myttlcodetmp{#1}}}
\newcommand{\myttlen}   [1]{{\myttlentmp{#1}}}

%%% Changes the spacing for everything in the document, including footnotes and tables 
\renewcommand{\baselinestretch}{1.35} 


%%% Auto numbering in Myanmar %%%
%This macro is to produce myanmar numbering by adopting the thai numbering method
\makeatletter  
\def\@mmnum#1{\expandafter\@@mmnum\number#1\@nil}  
\def\@@mmnum#1{%  
  \ifx#1\@nil  
  \else  
  \char\numexpr#1+"1040\relax  
  \expandafter\@@mmnum\fi  
}  
\renewcommand\@arabic{\@mmnum} % to reset number in \arabic to \mmnum 
\makeatother 


%%% Formatting part, chapter, section, subsection, subsubsection heading and table of contents
%%% and caption
% For caption
\DeclareCaptionFont{captionfont}{\color{iron}\bfseries\fontspec[Script=Myanmar,Scale=0.9]{Pyidaungsu Bold}\selectfont}
\captionsetup{font=captionfont}
% For table of contents
\contentsmargin[1cm]{0cm}
\titlecontents{chapter}[0em]{\color{steelblue}\large\bfseries\mmpdk}
{\thecontentslabel\enspace}
{\hspace{1.05em}}
{ \hfill\contentspage}[\vskip 6pt]

\titlecontents{section}[1em]{\color{steelblue}\normalsize\bfseries\mmpdk}
{\thecontentslabel\enspace}
{}
{\titlerule*[1pc]{.}\quad\contentspage}[\vskip 4pt]

\titlecontents{subsection}[2.7em]{\color{steelblue}\normalfont\bfseries\mmpdk}
{\thecontentslabel\enspace}
{}
{\titlerule*[1pc]{.}\quad\contentspage}[\vskip 3pt]

% For titles and their name in headers
\titleformat{\section}[block] 
{\color{MidnightBlue}\normalfont\large\bfseries\mmpdk }{{\color{MidnightBlue}\large\thesection}}{1em}{}

\titleformat{\subsection}[block] 
{\color{MidnightBlue}\normalsize \mmpdk}{{\color{MidnightBlue}\normalsize\thesubsection}}{1em}{}

\titleformat{\subsubsection}[block] 
{\color{MidnightBlue}\normalsize\mmpdk }{{\color{MidnightBlue}\normalsize\thesubsubsection}}{1em}{}

\titleformat{\chapter}[display] 
    {\color{MidnightBlue}\normalfont\Huge\bfseries\mmpdk }{\color{MidnightBlue}{\Huge\mmpdk\thechapter}}{1ex}
    {\filright} 

\titleformat{\part}[display] 
{\filcenter\LARGE\mmpdk}{{\large\partname\; \thepart}}{1em}{\thispagestyle{empty}}

%%% Code listing related
\newfontface\pgcode[Scale=0.9, BoldFont={Ubuntu Mono Bold}]{Ubuntu Mono}
\lstset{
  language     = Java,
  basicstyle   = \pgcode,
  commentstyle = \color{gray},
  keywordstyle = \color{darkgray}\textbf,
  stringstyle  = \color{green!70!black},
  stringstyle  = \color{red},
  columns      = fullflexible,
  numbers      = left,
  numberstyle  = \scriptsize\sffamily\color{gray},
  caption      = A hello world program in Java,
  showstringspaces = false,
}

%%% Custom utility commands
\newcommand*\cleartoleftpage{%
  \clearpage
  \ifodd\value{page}\hbox{}\newpage\fi
}

\newcommand{\todef}[1]{\textbf{#1}}
\newcommand{\toem}[1]{\textbf{#1}}

\newcommand{\Fig}{ပုံ\xspace}
\newcommand{\enprogramming}{ပရိုဂရမ်းမင်း{\myen{(programming)}}}
\newcommand{\mmprogramming}{ပရိုဂရမ်းမင်း}
\newcommand{\enprogram}{ပရိုဂရမ်{\myen{(program)}}}
\newcommand{\mmprogram}{ပရိုဂရမ်}
\newcommand{\encommand}{ကွန်မန်း{\myen{(command)}}}
\newcommand{\mmcommand}{ကွန်မန်း}
\newcommand{\encorner}{ကွန်နာ{\myen{(corner)}}}
\newcommand{\mmcorner}{ကွန်နာ}
\newcommand{\enbeeper}{ဘိပါ{\myen{(beeper)}}}
\newcommand{\mmbeeper}{ဘိပါ}
\newcommand{\enprogramCode}{ပရိုဂရမ်ကုဒ်{\myen{(program code)}}}
\newcommand{\mmprogramCode}{ပရိုဂရမ်ကုဒ်}
\newcommand{\enprogrammingLanguageDef}{ပရိုဂရမ်ရေးရန် အသုံးပြုသည့် ဘာသာစကား{\myen{(programming language)}}}
\newcommand{\enprogrammingLanguage}{{\myen{programming language}}\xspace}
\newcommand{\encontrolFlowStatement}{{\myen{control flow statement}}\xspace}

\newcommand{\enprog}{\enprogramming}



\title{\mmpdk အခြေခံ ပရိုဂရမ် ရေးနည်း } 
\author{ပြည်စိုး} 
\date{၀၅/၀၅/၂၀၂၂}

\begin{document}

\setcounter{secnumdepth}{3} % counter for susubsection
\setcounter{tocdepth}{3} % to view susubsection in toc

\frontmatter
\maketitle
\tableofcontents
\cleardoublepage

\mainmatter
\include{ch01}
\include{ch02}
\include{ch03}



\end{document}